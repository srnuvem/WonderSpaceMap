<!DOCTYPE html>
<html>

<head>
  <title>Órbitas dos Corpos Celestes</title>
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    canvas {
      display: block;
      margin: auto;
      border: 1px solid black;
    }

    button {
      display: block;
      margin: 10px auto;
    }
  </style>
</head>

<body>
  <button id="saveButton">Salvar Imagem</button>
  <canvas id="myCanvas" width="4320" height="4320"></canvas>
  <script>

    const canvas = document.getElementById('myCanvas');
    const ctx = canvas.getContext('2d');
    // const scale = canvas.width / 960
    const scale = canvas.width / 480 * 8

    const astros = {
      "Jupiter": { "name": "" , cor:"#FFCF54","corTexto": "#FFFFFF", grau: 0, divisores: 0, diametroOrbita: 0 * scale, diametro: 2.97 * scale , "grauPorDia": 0, "grauBase": 0},
      "Orientacao1": { "name": "" , cor:"gray","corTexto": "#FFFFFF", grau: 0, divisores: 6, diametroOrbita: 20 * scale, diametro: 0 * scale , "grauPorDia": 0, "grauBase": 0},
      "Almateia": { "name": "" , cor:"#878787","corTexto": "#FFFFFF", grau:0, divisores: 12, diametroOrbita: 40 * scale, diametro: 0.13 * scale , "grauPorDia": 0, "grauBase": 0},
      "Orientacao2": { "name": "" , cor:"gray","corTexto": "#FFFFFF", grau: 0, divisores: 18, diametroOrbita: 60 * scale, diametro: 0 * scale , "grauPorDia": 0, "grauBase": 0},
      "Orientacao3": { "name": "" , cor:"gray","corTexto": "#FFFFFF", grau: 0, divisores: 24, diametroOrbita: 80 * scale, diametro: 0 * scale , "grauPorDia": 0, "grauBase": 0},
      "Io": { "name": "" , cor:"#F9F290","corTexto": "#FFFFFF", grau: 12, divisores: 30, diametroOrbita: 100 * scale, diametro: 0.48 * scale , "grauPorDia": 0, "grauBase": 0},
      "Europa": { "name": "" , cor:"#75341A","corTexto": "#FFFFFF", grau: 24, divisores: 36, diametroOrbita: 120 * scale, diametro: 0.44 * scale , "grauPorDia": 0, "grauBase": 0},
      "Orientacao4": { "name": "" , cor:"gray","corTexto": "#FFFFFF", grau: 0, divisores: 42, diametroOrbita: 140 * scale, diametro: 0 * scale , "grauPorDia": 0, "grauBase": 0},
      "Ganimedes": { "name": "" , cor:"#B8B0A0","corTexto": "#FFFFFF", grau: 48, divisores: 48, diametroOrbita: 160 * scale, diametro: 0.58 * scale , "grauPorDia": 0, "grauBase": 0},
      "Orientacao5": { "name": "" , cor:"gray","corTexto": "#FFFFFF", grau: 0, divisores: 54, diametroOrbita: 180 * scale, diametro: 0 * scale , "grauPorDia": 0, "grauBase": 0},
      "Orientacao6": { "name": "" , cor:"gray","corTexto": "#FFFFFF", grau: 0, divisores: 60, diametroOrbita: 200 * scale, diametro: 0 * scale , "grauPorDia": 0, "grauBase": 0},
      "Calisto": { "name": "" , cor:"#45655B","corTexto": "#FFFFFF", grau: 96, divisores: 66, diametroOrbita: 220 * scale, diametro: 0.55 * scale , "grauPorDia": 0, "grauBase": 0},
    };
    

    function drawHeaderText() {
      ctx.fillStyle = 'white';
      ctx.font = '48px Arial';
      ctx.textAlign = 'right';
      ctx.textBaseline = 'top';
      ctx.fillText('Wonder Space', canvas.width - 20, 20);

      ctx.font = '36px Arial';
      ctx.fillText('Sistema Jupiter', canvas.width - 20, 80);
      ctx.fillText('Marcações: 1Gh', canvas.width - 20, 180);
    }

    function drawStars() {
      const numStars = 150;
      ctx.fillStyle = 'black';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = 'white';

      for (let i = 0; i < numStars; i++) {
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height;
        ctx.fillRect(x, y, 2, 2);
      }
    }

    function drawBody(astro) {
      const { diametroOrbita, cor, grau, diametro } = astros[astro];

      const raioOrbita = diametroOrbita / 8;
      const x = canvas.width / 2 + raioOrbita * Math.cos((grau - 90) * (Math.PI / 180));
      const y = canvas.height / 2 + raioOrbita * Math.sin((grau - 90) * (Math.PI / 180));

      ctx.strokeStyle = cor;
      ctx.setLineDash([5, 2]); // 5 é o tamanho do traço, 5 é o espaço entre traços
      ctx.lineWidth = 1;

      ctx.beginPath();
      ctx.arc(canvas.width / 2, canvas.height / 2, raioOrbita, 0, 2 * Math.PI);
      ctx.stroke();

      ctx.fillStyle = cor;
      ctx.beginPath();
      ctx.arc(x, y, diametro, 0, 2 * Math.PI);
      ctx.fill();

      ctx.fillStyle = "white";
      ctx.font = "12px Arial";
      ctx.textAlign = "center";
      ctx.textBaseline = "bottom";
      ctx.fillText(astro, x, y - 0.8 * scale);
    }

    function drawGuideLine(astro) {
      const { diametroOrbita, cor, grau } = astros[astro];

      const raioOrbita = diametroOrbita / 8;
      const x = canvas.width / 2 + raioOrbita * Math.cos((grau - 90) * (Math.PI / 180));
      const y = canvas.height / 2 + raioOrbita * Math.sin((grau - 90) * (Math.PI / 180));

      ctx.strokeStyle = cor;
      ctx.setLineDash([5, 2]); // 5 é o tamanho do traço, 5 é o espaço entre traços
      ctx.lineWidth = 1;

      ctx.beginPath();
      ctx.arc(canvas.width / 2, canvas.height / 2, raioOrbita, 0, 2 * Math.PI);
      ctx.stroke();
    }

    function drawMarkers(astro) {
      const divisores = astros[astro].divisores;

      for (let i = 0; i < divisores; i++) {
        const angulo = (360 / divisores) * i;

        const { diametroOrbita, cor } = astros[astro];
        const grau = angulo;

        const lineSize = scale / 4;
        const midSize = lineSize / 2;

        const raioOrbita = diametroOrbita / 8;
        const x = canvas.width / 2 + raioOrbita * Math.cos((grau - 90) * (Math.PI / 180));
        const y = canvas.height / 2 + raioOrbita * Math.sin((grau - 90) * (Math.PI / 180));

        const inicioX = x - midSize * Math.cos((grau - 90) * (Math.PI / 180));
        const inicioY = y - midSize * Math.sin((grau - 90) * (Math.PI / 180));

        const fimX = inicioX + lineSize * Math.cos((grau - 90) * (Math.PI / 180));
        const fimY = inicioY + lineSize * Math.sin((grau - 90) * (Math.PI / 180));

        ctx.strokeStyle = cor;
        ctx.setLineDash([]); // 5 é o tamanho do traço, 5 é o espaço entre traços
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(inicioX, inicioY);
        ctx.lineTo(fimX, fimY);
        ctx.stroke();
      }
    }

    function drawAsteroids() {
      const numAsteroids = 5000; // Número de asteroides a serem desenhados
      const asteroidSize = scale / 16
      const raioOrbita = astros["Orientacao Cinturão de Asteroides"].diametroOrbita / 8; // Raio da órbita
      const cor = astros["Orientacao Cinturão de Asteroides"].cor; // Cor dos asteroides

      ctx.fillStyle = cor;


      for (let i = 0; i < numAsteroids; i++) {
        // Gerar uma posição aleatória ao longo da órbita
        const angulo = Math.random() * 360;
        const raioVariacao = Math.random() * scale; // Variacao aleatoria de até 5 pixels para cima ou para baixo
        const raioFinal = raioOrbita + raioVariacao - scale / 2;
        const x = canvas.width / 2 + raioFinal * Math.cos((angulo - 90) * (Math.PI / 180));
        const y = canvas.height / 2 + raioFinal * Math.sin((angulo - 90) * (Math.PI / 180));

        // Desenhar o asteroide
        ctx.fillRect(x, y, asteroidSize, asteroidSize);
      }
    }

    function saveImage() {
      const dataURL = canvas.toDataURL('image/png');
      const link = document.createElement('a');
      link.href = dataURL;
      link.download = 'orbitas_celestes_4k.png';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    function drawSun() {
      const { diametroOrbita, cor, grau, diametro } = astros["Jupiter"];

      ctx.fillStyle = cor;
      ctx.beginPath();
      ctx.arc(canvas.width / 2, canvas.height / 2, diametro, 0, 2 * Math.PI);
      ctx.fill();

      ctx.fillStyle = "black";
      ctx.font = "12px Arial";
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.fillText("Jupiter", canvas.width / 2, canvas.height / 2
      );
    }

    drawStars();

    // drawAsteroids();
    for (const astro in astros) {
      if (astro !== "Jupiter") {
        if (astro.includes("Orientacao")) {
          drawGuideLine(astro)
        } else {
          drawBody(astro);
        }
        drawMarkers(astro);

      }
    }

    drawSun();
    drawHeaderText();

    document.getElementById("saveButton").addEventListener("click", saveImage);
  </script>
</body>

</html>